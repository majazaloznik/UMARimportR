% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/db_writing.R
\name{insert_new_table_table}
\alias{insert_new_table_table}
\title{Insert a new row into the table table}
\usage{
insert_new_table_table(con, df, schema = "platform")
}
\arguments{
\item{con}{PostgreSQL connection object created by the RPostgres package.}

\item{df}{A data frame with one row containing the following columns:
* code (character): unique identifier code for the table
* name (character): name/description of the table
* source_id (integer): foreign key reference to the source table
* url (character, optional): URL where the table data can be found
* notes (character/json, optional): Additional notes in JSON format
* keep_vintage (logical): Whether to keep historical versions of the table}

\item{schema}{character schema name, default is "platform"}
}
\value{
A data frame with one column 'count' indicating number of rows inserted (1 for success, 0 for duplicate)
}
\description{
Inserts a new row into the platform.table table using the insert_new_table SQL function.
The function prevents duplicate insertions using ON CONFLICT DO NOTHING.
}
\examples{
\dontrun{
df <- data.frame(
  code = "GDP_Q",
  name = "Quarterly GDP",
  source_id = 1,
  url = "http://example.com",
  notes = jsonlite::toJSON(list(frequency = "quarterly")),
  keep_vintage = TRUE
)
insert_new_table_table(df)
}

}
